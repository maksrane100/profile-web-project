{"remainingRequest":"C:\\for_github\\RentalManagementSystem-VUE-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\for_github\\RentalManagementSystem-VUE-master\\src\\views\\tenant.vue?vue&type=style&index=0&id=46fcba44&scoped=true&lang=css&","dependencies":[{"path":"C:\\for_github\\RentalManagementSystem-VUE-master\\src\\views\\tenant.vue","mtime":1577927383712},{"path":"C:\\for_github\\RentalManagementSystem-VUE-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\for_github\\RentalManagementSystem-VUE-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\for_github\\RentalManagementSystem-VUE-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\for_github\\RentalManagementSystem-VUE-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\for_github\\RentalManagementSystem-VUE-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnRlbmFudHBhZ2UgewoJaGVpZ2h0OiA4NTdweDsKfQoKLnRlbmFudEhlYWRlciB7Cglwb3NpdGlvbjogcmVsYXRpdmU7Cgl0b3A6IDE1cHg7CgloZWlnaHQ6IDUwcHg7Cglib3JkZXI6IDFweCBzb2xpZCBhbGljZWJsdWU7CglsaW5lLWhlaWdodDogNTBweDsKCW1hcmdpbi1sZWZ0OiAyMHB4OwoJbWFyZ2luLXJpZ2h0OiAyMHB4OwoJcGFkZGluZy1ib3R0b206IDE1cHg7Cn0KCi5rZXl3b3JkIHsKCXdpZHRoOiAxMi41cmVtOwoJcGFkZGluZy1sZWZ0OiAxLjg3NXJlbTsKCXBhZGRpbmctcmlnaHQ6IDMwcHg7CglmbG9hdDogbGVmdDsKfQoKLnRlbmFudHRhYmxlIHsKCXBhZGRpbmctbGVmdDogMjBweDsKCXBhZGRpbmctcmlnaHQ6IDIwcHg7Cn0KCi5lbC1wYWdpbmF0aW9uIHsKCW1hcmdpbi10b3A6IDE1cHg7CglmbG9hdDogcmlnaHQ7Cn0K"},{"version":3,"sources":["tenant.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoUA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"tenant.vue","sourceRoot":"src/views","sourcesContent":["<template>\n\t<div class=\"tenantpage\">\n\t\t<div class=\"tenantHeader\">\n\t\t\t<el-input v-model=\"keyword\" placeholder=\"Search by tenant name\" class=\"keyword\" @change=\"searchTenant()\"></el-input>\n\t\t\t<div>\n\t\t\t\t<el-button type=\"primary\" @click=\"openAddTenant()\">Add</el-button>\n\t\t\t\t<el-button type=\"danger\" @click=\"delTenant()\">Delete</el-button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"tenanttable\">\n\t\t\t<el-table :data=\"searchTenant()\" border stripe style=\"width: 100%\" height=\"720\" ref=\"tenantTable\" @selection-change=\"handleSelectionChange\">\n\t\t\t\t<el-table-column type=\"selection\" width=\"55\"></el-table-column>\n\t\t\t\t<el-table-column type=\"index\" width=\"55\"></el-table-column>\n\t\t\t\t<el-table-column prop=\"tenant_name\" label=\"Name\"></el-table-column>\n\t\t\t\t<el-table-column prop=\"tenant_phone\" label=\"Phone Number\"> </el-table-column>\n\t\t\t\t<el-table-column prop=\"tenant_sfznum\" label=\"SFZ Number\"></el-table-column>\n\t\t\t\t<el-table-column label=\"Gender\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t{{scope.row.sex==1 ? \"Male\" : \"Female\"}}\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"Action\" width=\"90px\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<el-button style=\"background-color: rgb(13,224,243); color: #FFFFFF;\" @click=\"openUpdTenant(scope.row)\">Update Tenant</el-button>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t</el-table>\n\t\t\t<el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"page\"\n\t\t\t :page-sizes=\"[5,10, 20, 30, 40]\" :page-size=\"pagesize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"searchTenant().length\">\n\t\t\t</el-pagination>\n\t\t</div>\n\n\t\t<div>\n\t\t\t<el-search-table-pagination\n      type=\"local\"\n      :data=\"searchTenant()\"\n      :page-sizes=\"[5, 10]\"\n      :columns=\"columns\"\n      :form-options=\"formOptions\">\n    </el-search-table-pagination>\n\t\n\t\t</div>\n\t\t<el-dialog title=\"Add tenant information\" :visible.sync=\"dialogAddTenant\" width=\"25%\" :before-close=\"handleClose\" :show-close=\"showClose\">\n\t\t\t<el-form :model=\"tenantForm\" status-icon :rules=\"rules\" label-width=\"100px\" ref=\"addtenantForm\">\n\t\t\t\t<el-form-item label=\"Name\" prop=\"tenant_name\">\n\t\t\t\t\t<el-input type=\"text\" v-model=\"tenantForm.tenant_name\" autocomplete=\"off\" placeholder=\"Enter Name\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"Phone Number\" prop=\"tenant_phone\">\n\t\t\t\t\t<el-input type=\"text\" v-model=\"tenantForm.tenant_phone\" autocomplete=\"off\" placeholder=\"Enter Phone Number\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"SFZ Number\">\n\t\t\t\t\t<el-input type=\"text\" v-model=\"tenantForm.tenant_sfznum\" autocomplete=\"off\" placeholder=\"Enter SFZ Number\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"Gender\" prop=\"sex\">\n\t\t\t\t\t<el-radio v-model=\"tenantForm.sex\" label=\"1\">Male</el-radio>\n\t\t\t\t\t<el-radio v-model=\"tenantForm.sex\" label=\"0\">Female</el-radio>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\n\t\t\t\t<el-button @click=\"cancleDialog('addtenantForm')\">Cancel</el-button>\n\t\t\t\t<el-button type=\"primary\" @click=\"addTenant('addtenantForm')\">OK</el-button>\n\t\t\t</div>\n\t\t</el-dialog>\n\n\t\t<el-dialog title=\"Modify tenant information\" :visible.sync=\"dialogUpdTenant\" width=\"25%\" :before-close=\"handleClose\" :show-close=\"showClose\">\n\t\t\t<el-form :model=\"tenantForm\" status-icon :rules=\"rules\" label-width=\"100px\" ref=\"updtenantForm\">\n\t\t\t\t<el-form-item label=\"Name\" prop=\"tenant_name\">\n\t\t\t\t\t<el-input type=\"text\" v-model=\"tenantForm.tenant_name\" autocomplete=\"off\" placeholder=\"Please enter tenant name\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"Phone Number\" prop=\"tenant_phone\">\n\t\t\t\t\t<el-input type=\"text\" v-model=\"tenantForm.tenant_phone\" autocomplete=\"off\" placeholder=\"Please enter the tenant's mobile number\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"Identification Number\">\n\t\t\t\t\t<el-input type=\"text\" v-model=\"tenantForm.tenant_sfznum\" autocomplete=\"off\" placeholder=\"Please enter ID number\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"Gender\" prop=\"sex\">\n\t\t\t\t\t<el-radio v-model=\"tenantForm.sex\" label=\"1\">Male</el-radio>\n\t\t\t\t\t<el-radio v-model=\"tenantForm.sex\" label=\"0\">Female</el-radio>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\n\t\t\t\t<el-button @click=\"cancleDialog('updtenantForm')\">Cancel</el-button>\n\t\t\t\t<el-button type=\"primary\" @click=\"updTenant('updtenantForm')\">OK</el-button>\n\t\t\t</div>\n\t\t</el-dialog>\n\n\t</div>\n</template>\n\n<script>\n\texport default {\n\t\tname: 'tenant',\n\t\tdata() {\n\t\t\t//租客姓名判断规则\n\t\t\tvar validateTenantname = (rule, value, callback) => {\n\t\t\t\tif (strIsEmpty(strTrim(value))) {\n\t\t\t\t\tcallback(new Error('Please enter tenant name'));\n\t\t\t\t} else {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t};\n\t\t\t//租客手机判断规则\n\t\t\tvar validatePhoneNumber = (rule, value, callback) => {\n\t\t\t\tif (strIsEmpty(strTrim(value))) {\n\t\t\t\t\tcallback(new Error('Please enter the phone number'));\n\t\t\t\t} \n\t\t\t\tcallback();\n\t\t\t};\n\t\t\t//租客性别填写判断规则\n\t\t\tvar validateSex = (rule, value, callback) => {\n\t\t\t\tif (strIsEmpty(strTrim(value))) {\n\t\t\t\t\tcallback(new Error('Please select a gender'));\n\t\t\t\t}\n\t\t\t\tcallback();\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tkeyword: \"\",\n\t\t\t\ttenantTableData: [],\n\t\t\t\tdialogAddTenant: false,\n\t\t\t\tdialogUpdTenant: false,\n\t\t\t\ttenantForm: {\n\t\t\t\t\tid: \"\",\n\t\t\t\t\ttenant_name: \"\",\n\t\t\t\t\ttenant_phone: \"\",\n\t\t\t\t\ttenant_sfznum: \"\",\n\t\t\t\t\tsex: \"\"\n\t\t\t\t},\n\t\t\t\tshowClose: false,\n\t\t\t\trules: {\n\t\t\t\t\ttenant_name: [{\n\t\t\t\t\t\tvalidator: validateTenantname,\n\t\t\t\t\t\ttrigger: 'blur',\n\t\t\t\t\t\trequired: true\n\t\t\t\t\t}],\n\t\t\t\t\ttenant_phone: [{\n\t\t\t\t\t\tvalidator: validatePhoneNumber,\n\t\t\t\t\t\ttrigger: 'blur',\n\t\t\t\t\t\trequired: true\n\t\t\t\t\t}],\n\t\t\t\t\tsex: [{\n\t\t\t\t\t\tvalidator: validateSex,\n\t\t\t\t\t\ttrigger: 'blur',\n\t\t\t\t\t\trequired: true\n\t\t\t\t\t}]\n\t\t\t\t},\n\t\t\t\t//存储勾选信息\n\t\t\t\ttenantTableSelection: [],\n\t\t\t\tpagesize: 10,\n\t\t\t\tpage: 1,\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\t//从后台请求取得用户数据\n\t\t\tgetTenantData() {\n\t\t\t\tlet thisapp = this;\n\t\t\t\tthis.$axios({\n\t\t\t\t\tmethods: 'post',\n\t\t\t\t\turl: 'tenant/findTenantAll',\n\t\t\t\t}).then(response => {\n\t\t\t\t\tthisapp.tenantTableData = response.data;\n\t\t\t\t})\n\t\t\t},\n\t\t\t//根据搜索框关键字查询用户\n\t\t\tsearchTenant() {\n\t\t\t\tlet len = this.tenantTableData.length;\n\t\t\t\tlet tenantTableData2 = [];\n\n\t\t\t\tlet maxindex = this.page * this.pagesize;\n\t\t\t\tlet minindex = (this.page - 1) * this.pagesize;\n\t\t\t\tif (maxindex > len) {\n\t\t\t\t\tmaxindex = len;\n\t\t\t\t}\n\t\t\t\tfor (let i = minindex; i < maxindex; i++) {\n\t\t\t\t\tif (this.keyword == \"\" || this.tenantTableData[i].tenant_name.indexOf(this.keyword) != '-1') {\n\t\t\t\t\t\ttenantTableData2.push(this.tenantTableData[i])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn tenantTableData2;\n\t\t\t},\n\t\t\t//点击遮罩层什么都不做，不让dialog消失\n\t\t\thandleClose(done) {},\n\t\t\t//新增窗口取消按钮\n\t\t\tcancleDialog(refForm) {\n\t\t\t\tthis.dialogAddTenant = false;\n\t\t\t\tthis.dialogUpdTenant = false;\n\t\t\t\t//重制样式\n\t\t\t\tthis.$refs[refForm].resetFields();\n\t\t\t},\n\t\t\topenAddTenant() {\n\t\t\t\tfor (let key in this.tenantForm) {\n\t\t\t\t\t//重制表单数据\n\t\t\t\t\tthis.tenantForm[key] = \"\";\n\t\t\t\t}\n\t\t\t\tthis.dialogAddTenant = true;\n\t\t\t},\n\t\t\t//新增窗口确定按钮\n\t\t\taddTenant(refForm) {\n\t\t\t\tthis.$refs[refForm].validate((valid) => {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\t//前台验证全部正确,数据提交\n\t\t\t\t\t\tthis.$axios.post(\"tenant/addTenant\", {\n\t\t\t\t\t\t\ttenant_name: this.tenantForm.tenant_name,\n\t\t\t\t\t\t\ttenant_phone: this.tenantForm.tenant_phone,\n\t\t\t\t\t\t\ttenant_sfznum: this.tenantForm.tenant_sfznum,\n\t\t\t\t\t\t\tsex: this.tenantForm.sex\n\t\t\t\t\t\t}).then(response => {\n\t\t\t\t\t\t\tif (response.data == 1) {\n\t\t\t\t\t\t\t\tthis.cancleDialog(refForm);\n\t\t\t\t\t\t\t\tthis.getTenantData();\n\t\t\t\t\t\t\t\tthis.$message.success(\"Add tenant information successfully!\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.$message.error(\"Add tenant information failed, please contact administrator\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t//修改按钮,弹出修改dialog\n\t\t\topenUpdTenant(val) {\n\t\t\t\tthis.dialogUpdTenant = true;\n\t\t\t\t//数据填充表单\n\t\t\t\tthis.tenantForm.id = val.id;\n\t\t\t\tthis.tenantForm.tenant_name = val.tenant_name;\n\t\t\t\tthis.tenantForm.tenant_phone = val.tenant_phone;\n\t\t\t\tthis.tenantForm.tenant_sfznum = val.tenant_sfznum;\n\t\t\t\tthis.tenantForm.sex = val.sex\n\t\t\t},\n\t\t\t//表格多选框控制\n\t\t\thandleSelectionChange(val) {\n\t\t\t\tthis.tenantTableSelection = val;\n\t\t\t},\n\t\t\t//修改窗口确定按钮\n\t\t\tupdTenant(refForm) {\n\t\t\t\tthis.$refs[refForm].validate((valid) => {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\t//前台验证全部正确,数据提交\n\t\t\t\t\t\tthis.$axios.post(\"tenant/updTenant\", {\n\t\t\t\t\t\t\tid: this.tenantForm.id,\n\t\t\t\t\t\t\ttenant_name: this.tenantForm.tenant_name,\n\t\t\t\t\t\t\ttenant_phone: this.tenantForm.tenant_phone,\n\t\t\t\t\t\t\ttenant_sfznum: this.tenantForm.tenant_sfznum,\n\t\t\t\t\t\t\tsex: this.tenantForm.sex,\n\t\t\t\t\t\t}).then(response => {\n\t\t\t\t\t\t\tif (response.data == 1) {\n\t\t\t\t\t\t\t\tthis.cancleDialog(refForm);\n\t\t\t\t\t\t\t\tthis.getTenantData();\n\t\t\t\t\t\t\t\tthis.$message.success(\"User modified successfully!\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.$message.error(\"User modification failed, please contact the administrator\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tdelTenant() {\n\t\t\t\tif (this.tenantTableSelection.length == 0) {\n\t\t\t\t\tthis.$message.error(\"Please select 1 piece of data to delete\");\n\t\t\t\t} else {\n\t\t\t\t\tthis.$confirm('This operation will permanently delete the selected data. Do you want to continue?', 'Prompt', {\n\t\t\t\t\t\tconfirmButtonText: 'Determine',\n\t\t\t\t\t\tcancelButtonText: 'cancel',\n\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tlet ids = [];\n\t\t\t\t\t\tfor (let key in this.tenantTableSelection) {\n\t\t\t\t\t\t\tids.push(this.tenantTableSelection[key].id)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.$axios.post(\"tenant/delTenant\", {\n\t\t\t\t\t\t\t\tids: ids\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(response => {\n\t\t\t\t\t\t\t\tif (response.data > 0) {\n\t\t\t\t\t\t\t\t\tthis.$message.success(\"Delete successfully\");\n\t\t\t\t\t\t\t\t\tthis.getTenantData();\n\t\t\t\t\t\t\t\t} else if (response.data = -1) {\n\t\t\t\t\t\t\t\t\tthis.$message.error(\"The selected tenant is still renting, please remove the user in the rental management\");\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.$message.error(\"Delete failed, contact administrator\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\t\t\tthis.$message.error(\"The network is down, please contact the administrator\");\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\tthis.$message.info(\"Cancelled\");\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t//分页切换选择展示多少条时回调用的方法\n\t\t\thandleSizeChange(val) {\n\t\t\t\tconsole.log(`每页 ${val} 条`);\n\t\t\t\tthis.pagesize = val;\n\t\t\t},\n\t\t\t//切换到第几页时调用的方法\n\t\t\thandleCurrentChange(val) {\n\t\t\t\tconsole.log(`当前页: ${val}`);\n\t\t\t\tthis.page = val;\n\t\t\t}\n\t\t},\n\t\tcreated() {\n\t\t\tthis.getTenantData()\n\t\t}\n\t}\n\n\tfunction strIsEmpty(obj) {\n\t\tif (typeof obj == \"undefined\" || obj == null || obj == \"\") {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tfunction strTrim(str) {\n\t\tif (typeof str == \"string\") {\n\t\t\treturn str.replace(/\\s+/g, \"\").replace(/<\\/?.+?>/g, \"\").replace(/[\\r\\n]/g, \"\")\n\t\t}\n\t\treturn str;\n\t}\n</script>\n\n<style scoped>\n\t.tenantpage {\n\t\theight: 857px;\n\t}\n\n\t.tenantHeader {\n\t\tposition: relative;\n\t\ttop: 15px;\n\t\theight: 50px;\n\t\tborder: 1px solid aliceblue;\n\t\tline-height: 50px;\n\t\tmargin-left: 20px;\n\t\tmargin-right: 20px;\n\t\tpadding-bottom: 15px;\n\t}\n\n\t.keyword {\n\t\twidth: 12.5rem;\n\t\tpadding-left: 1.875rem;\n\t\tpadding-right: 30px;\n\t\tfloat: left;\n\t}\n\n\t.tenanttable {\n\t\tpadding-left: 20px;\n\t\tpadding-right: 20px;\n\t}\n\n\t.el-pagination {\n\t\tmargin-top: 15px;\n\t\tfloat: right;\n\t}\n</style>\n"]}]}