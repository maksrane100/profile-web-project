{"remainingRequest":"C:\\for_github\\RentalManagementSystem-VUE-master\\node_modules\\babel-loader\\lib\\index.js!C:\\for_github\\RentalManagementSystem-VUE-master\\src\\http.js","dependencies":[{"path":"C:\\for_github\\RentalManagementSystem-VUE-master\\src\\http.js","mtime":1573048901000},{"path":"C:\\for_github\\RentalManagementSystem-VUE-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\for_github\\RentalManagementSystem-VUE-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IE1lc3NhZ2UsIExvYWRpbmcgfSBmcm9tICJlbGVtZW50LXVpIjsKaW1wb3J0IHJvdXRlciBmcm9tICIuL3JvdXRlci9pbmRleC5qcyI7CnZhciBCQVNFX1VSTCA9ICJodHRwOi8vbG9jYWxob3N0Ojk5OTkvIjsKdmFyIGxvYWRpbmc7CnZhciBvbk1lc3NhZ2UgPSB0cnVlOyAvL+W8gOWni+WKoOi9veWKqOeUuwoKZnVuY3Rpb24gc3RhcnRMb2FkaW5nKCkgewogIGxvYWRpbmcgPSBMb2FkaW5nLnNlcnZpY2UoewogICAgbG9jazogdHJ1ZSwKICAgIHRleHQ6ICLmi7zlkb3liqDovb3kuK0uLi4iLAogICAgYmFja2dyb3VuZDogJ3JnYmEoMCwwLDAsMC43KScKICB9KTsKfSAvL+e7k+adn+WKoOi9veWKqOeUuwoKCmZ1bmN0aW9uIGVuZExvYWRpbmcoKSB7CiAgbG9hZGluZy5jbG9zZSgpOwp9IC8v6K+35rGC5oum5oiqCgoKYXhpb3MuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICBjb25maWcudXJsID0gQkFTRV9VUkwgKyBjb25maWcudXJsOyAvL+WKoOi9veWKqOeUuwoKICBzdGFydExvYWRpbmcoKTsKCiAgaWYgKGxvY2FsU3RvcmFnZS5saW5oZFRva2VuKSB7CiAgICAvL+iuvue9rue7n+S4gOeahOivt+axguWktGhlYWRlcgogICAgY29uZmlnLmhlYWRlcnMubGluaGRUb2tlbiA9IGxvY2FsU3RvcmFnZS5saW5oZFRva2VuOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8v5ZON5bqU5oum5oiqCgpheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIC8v57uT5p2f5Yqg6L295Yqo55S7CiAgZW5kTG9hZGluZygpOwogIHJldHVybiByZXNwb25zZTsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgZW5kTG9hZGluZygpOyAvL+iOt+WPlumUmeivr+eKtuaAgeeggQoKICB2YXIgc3RhdHVzID0gZXJyb3IucmVzcG9uc2Uuc3RhdHVzOwoKICBpZiAoc3RhdHVzID09IDQwMSkgewogICAgaWYgKG9uTWVzc2FnZSkgewogICAgICBNZXNzYWdlLmVycm9yKCLouqvku73kv6Hmga/lpLHmlYjvvIzor7fph43mlrDnmbvlvZUiKTsKICAgICAgb25NZXNzYWdlID0gZmFsc2U7CiAgICB9IC8v5riF6ZmkdG9rZW4s6Lez6L2s5Yiw55m75b2V6aG16Z2iCgoKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJsaW5oZFRva2VuIik7CiAgICByb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgfSBlbHNlIHsKICAgIE1lc3NhZ2UuZXJyb3IoIuaVsOaNruaPkOS6pC/ojrflj5blpLHotKXvvIzor7fogZTns7vnrqHnkIblkZjvvIzplJnor6/ku6PnoIHvvJoiICsgc3RhdHVzKTsKICB9CgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpleHBvcnQgZGVmYXVsdCBheGlvczs="},{"version":3,"sources":["C:/for_github/RentalManagementSystem-VUE-master/src/http.js"],"names":["axios","Message","Loading","router","BASE_URL","loading","onMessage","startLoading","service","lock","text","background","endLoading","close","interceptors","request","use","config","url","localStorage","linhdToken","headers","error","Promise","reject","response","status","removeItem","push"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,OAAR,EAAgBC,OAAhB,QAA8B,YAA9B;AACA,OAAOC,MAAP;AAEA,IAAMC,QAAQ,GAAG,wBAAjB;AACA,IAAIC,OAAJ;AACA,IAAIC,SAAS,GAAG,IAAhB,C,CAEA;;AACA,SAASC,YAAT,GAAuB;AACtBF,EAAAA,OAAO,GAAGH,OAAO,CAACM,OAAR,CAAgB;AACzBC,IAAAA,IAAI,EAAC,IADoB;AAEzBC,IAAAA,IAAI,EAAC,UAFoB;AAGzBC,IAAAA,UAAU,EAAC;AAHc,GAAhB,CAAV;AAKA,C,CACD;;;AACA,SAASC,UAAT,GAAqB;AACpBP,EAAAA,OAAO,CAACQ,KAAR;AACA,C,CAED;;;AACAb,KAAK,CAACc,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAAC,MAAM,EAAG;AACvCA,EAAAA,MAAM,CAACC,GAAP,GAAad,QAAQ,GAAGa,MAAM,CAACC,GAA/B,CADuC,CAEvC;;AACAX,EAAAA,YAAY;;AAEZ,MAAGY,YAAY,CAACC,UAAhB,EAA2B;AAC1B;AACAH,IAAAA,MAAM,CAACI,OAAP,CAAeD,UAAf,GAA4BD,YAAY,CAACC,UAAzC;AACA;;AACD,SAAOH,MAAP;AACA,CAVD,EAUE,UAAAK,KAAK,EAAG;AACT,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACA,CAZD,E,CAcA;;AACAtB,KAAK,CAACc,YAAN,CAAmBW,QAAnB,CAA4BT,GAA5B,CAAgC,UAAAS,QAAQ,EAAG;AAC1C;AACAb,EAAAA,UAAU;AACV,SAAOa,QAAP;AACA,CAJD,EAIE,UAAAH,KAAK,EAAG;AACTV,EAAAA,UAAU,GADD,CAET;;AAFS,MAGDc,MAHC,GAGUJ,KAAK,CAACG,QAHhB,CAGDC,MAHC;;AAIT,MAAGA,MAAM,IAAI,GAAb,EAAiB;AAChB,QAAGpB,SAAH,EAAa;AACZL,MAAAA,OAAO,CAACqB,KAAR,CAAc,cAAd;AACAhB,MAAAA,SAAS,GAAG,KAAZ;AACA,KAJe,CAKhB;;;AACAa,IAAAA,YAAY,CAACQ,UAAb,CAAwB,YAAxB;AACAxB,IAAAA,MAAM,CAACyB,IAAP,CAAY,QAAZ;AACA,GARD,MAQK;AACJ3B,IAAAA,OAAO,CAACqB,KAAR,CAAc,2BAAyBI,MAAvC;AACA;;AACD,SAAOH,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACA,CApBD;AAsBA,eAAetB,KAAf","sourcesContent":["import axios from \"axios\";\nimport {Message,Loading} from \"element-ui\";\nimport router from \"./router/index.js\";\n\nconst BASE_URL = \"http://localhost:9999/\"\nlet loading;\nlet onMessage = true;\n\n//开始加载动画\nfunction startLoading(){\n\tloading = Loading.service({\n\t\tlock:true,\n\t\ttext:\"拼命加载中...\",\n\t\tbackground:'rgba(0,0,0,0.7)'\n\t})\n}\n//结束加载动画\nfunction endLoading(){\n\tloading.close();\n}\n\n//请求拦截\naxios.interceptors.request.use(config =>{\n\tconfig.url = BASE_URL + config.url;\n\t//加载动画\n\tstartLoading();\n\t\n\tif(localStorage.linhdToken){\n\t\t//设置统一的请求头header\n\t\tconfig.headers.linhdToken = localStorage.linhdToken;\n\t}\n\treturn config;\n},error =>{\n\treturn Promise.reject(error);\n})\n\n//响应拦截\naxios.interceptors.response.use(response =>{\n\t//结束加载动画\n\tendLoading();\n\treturn response;\n},error =>{\n\tendLoading();\n\t//获取错误状态码\n\tconst { status } = error.response;\n\tif(status == 401){\n\t\tif(onMessage){\n\t\t\tMessage.error(\"身份信息失效，请重新登录\");\n\t\t\tonMessage = false;\n\t\t}\n\t\t//清除token,跳转到登录页面\n\t\tlocalStorage.removeItem(\"linhdToken\");\n\t\trouter.push('/login');\n\t}else{\n\t\tMessage.error(\"数据提交/获取失败，请联系管理员，错误代码：\"+status);\n\t}\n\treturn Promise.reject(error);\n})\n\nexport default axios;"]}]}